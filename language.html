<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Language Converter - Textorr.com</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="language.css">
</head>
<body>
    <div class="bg-animation"></div>

    <div class="container">
        <div class="header">
            <h1>
                <svg width="40" height="40" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"/>
                </svg>
                Language Converter
            </h1>
            <p>Translate text between languages instantly</p>
        </div>

        <div class="translation-wrapper">
            <!-- Source Text Box -->
            <div class="text-box" id="sourceBox">
                <div class="text-box-header">
                    <div class="language-selector">
                        <span class="flag-icon" id="sourceFlag">ðŸ‡¬ðŸ‡§</span>
                        <select id="sourceLang">
                            <option value="en" data-flag="ðŸ‡¬ðŸ‡§">English</option>
                            <option value="es" data-flag="ðŸ‡ªðŸ‡¸">Spanish</option>
                            <option value="fr" data-flag="ðŸ‡«ðŸ‡·">French</option>
                            <option value="de" data-flag="ðŸ‡©ðŸ‡ª">German</option>
                            <option value="it" data-flag="ðŸ‡®ðŸ‡¹">Italian</option>
                            <option value="pt" data-flag="ðŸ‡µðŸ‡¹">Portuguese</option>
                            <option value="ru" data-flag="ðŸ‡·ðŸ‡º">Russian</option>
                            <option value="ja" data-flag="ðŸ‡¯ðŸ‡µ">Japanese</option>
                            <option value="ko" data-flag="ðŸ‡°ðŸ‡·">Korean</option>
                            <option value="zh" data-flag="ðŸ‡¨ðŸ‡³">Chinese</option>
                            <option value="ar" data-flag="ðŸ‡¸ðŸ‡¦">Arabic</option>
                            <option value="hi" data-flag="ðŸ‡®ðŸ‡³">Hindi</option>
                        </select>
                    </div>
                    <span class="char-count"><span id="charCount">0</span> / 5000</span>
                </div>
                <textarea 
                    id="sourceText" 
                    placeholder="Type or paste your text here..."
                    maxlength="5000"
                ></textarea>
                <div class="text-box-footer">
                    <div class="detected-lang" id="detectedLang" style="display: none;">
                        Detected: <strong id="detectedLangName"></strong>
                    </div>
                    <button class="action-btn" id="clearBtn">
                        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                        </svg>
                        Clear
                    </button>
                </div>
            </div>

            <!-- Swap Button -->
            <div class="swap-container">
                <button class="swap-btn" id="swapBtn">
                    <svg width="24" height="24" fill="white" viewBox="0 0 24 24">
                        <path d="M6.99 11L3 15l3.99 4v-3H14v-2H6.99v-3zM21 9l-3.99-4v3H10v2h7.01v3L21 9z"/>
                    </svg>
                </button>
            </div>

            <!-- Target Text Box -->
            <div class="text-box" id="targetBox">
                <div class="text-box-header">
                    <div class="language-selector">
                        <span class="flag-icon" id="targetFlag">ðŸ‡ªðŸ‡¸</span>
                        <select id="targetLang">
                            <option value="es" data-flag="ðŸ‡ªðŸ‡¸" selected>Spanish</option>
                            <option value="en" data-flag="ðŸ‡¬ðŸ‡§">English</option>
                            <option value="fr" data-flag="ðŸ‡«ðŸ‡·">French</option>
                            <option value="de" data-flag="ðŸ‡©ðŸ‡ª">German</option>
                            <option value="it" data-flag="ðŸ‡®ðŸ‡¹">Italian</option>
                            <option value="pt" data-flag="ðŸ‡µðŸ‡¹">Portuguese</option>
                            <option value="ru" data-flag="ðŸ‡·ðŸ‡º">Russian</option>
                            <option value="ja" data-flag="ðŸ‡¯ðŸ‡µ">Japanese</option>
                            <option value="ko" data-flag="ðŸ‡°ðŸ‡·">Korean</option>
                            <option value="zh" data-flag="ðŸ‡¨ðŸ‡³">Chinese</option>
                            <option value="ar" data-flag="ðŸ‡¸ðŸ‡¦">Arabic</option>
                            <option value="hi" data-flag="ðŸ‡®ðŸ‡³">Hindi</option>
                        </select>
                    </div>
                </div>
                <textarea 
                    id="targetText" 
                    placeholder="Translation will appear here..."
                    readonly
                ></textarea>
                <div class="text-box-footer">
                    <div></div>
                    <button class="action-btn" id="copyBtn" disabled>
                        <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                        </svg>
                        Copy
                    </button>
                </div>
            </div>
        </div>

        <button class="translate-btn" id="translateBtn">
            <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"/>
            </svg>
            <span class="btn-text">Translate</span>
            <div class="loader"></div>
        </button>

        <a href="home.html" class="back-link">
            <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"/>
            </svg>
            Back to Home
        </a>
    </div>

    <div class="tooltip" id="tooltip"></div>

    <script>
        // Elements
        const sourceText = document.getElementById('sourceText');
        const targetText = document.getElementById('targetText');
        const sourceLang = document.getElementById('sourceLang');
        const targetLang = document.getElementById('targetLang');
        const sourceFlag = document.getElementById('sourceFlag');
        const targetFlag = document.getElementById('targetFlag');
        const charCount = document.getElementById('charCount');
        const translateBtn = document.getElementById('translateBtn');
        const swapBtn = document.getElementById('swapBtn');
        const clearBtn = document.getElementById('clearBtn');
        const copyBtn = document.getElementById('copyBtn');
        const tooltip = document.getElementById('tooltip');
        const detectedLang = document.getElementById('detectedLang');
        const detectedLangName = document.getElementById('detectedLangName');

        // Update flags
        function updateFlags() {
            const sourceOption = sourceLang.options[sourceLang.selectedIndex];
            const targetOption = targetLang.options[targetLang.selectedIndex];
            sourceFlag.textContent = sourceOption.dataset.flag;
            targetFlag.textContent = targetOption.dataset.flag;
        }

        sourceLang.addEventListener('change', updateFlags);
        targetLang.addEventListener('change', updateFlags);

        // Character counter
        sourceText.addEventListener('input', () => {
            charCount.textContent = sourceText.value.length;
            if (sourceText.value.trim()) {
                clearBtn.disabled = false;
            } else {
                clearBtn.disabled = true;
                targetText.value = '';
                copyBtn.disabled = true;
            }
        });

        // Clear button
        clearBtn.addEventListener('click', () => {
            sourceText.value = '';
            targetText.value = '';
            charCount.textContent = '0';
            clearBtn.disabled = true;
            copyBtn.disabled = true;
            detectedLang.style.display = 'none';
        });

        // Swap languages
        swapBtn.addEventListener('click', () => {
            swapBtn.classList.add('animating');
            setTimeout(() => swapBtn.classList.remove('animating'), 600);

            const tempLang = sourceLang.value;
            const tempText = sourceText.value;

            sourceLang.value = targetLang.value;
            targetLang.value = tempLang;
            sourceText.value = targetText.value;
            targetText.value = tempText;

            updateFlags();
            charCount.textContent = sourceText.value.length;

            if (sourceText.value.trim()) {
                clearBtn.disabled = false;
                copyBtn.disabled = false;
            }
        });

        // Translate function
        async function translate() {
            const text = sourceText.value.trim();

            if (!text) {
                sourceText.style.borderColor = '#ef4444';
                showTooltip('Please enter text to translate', 'error');
                setTimeout(() => sourceText.style.borderColor = '', 300);
                return;
            }

            if (sourceLang.value === targetLang.value) {
                showTooltip('Source and target languages are the same', 'error');
                return;
            }

            translateBtn.classList.add('loading');

            try {
                // Using MyMemory Translation API (free, no key required)
                const response = await fetch(
                    `https://api.mymemory.translated.net/get?q=${encodeURIComponent(text)}&langpair=${sourceLang.value}|${targetLang.value}`
                );

                const data = await response.json();

                if (data.responseStatus === 200 && data.responseData) {
                    targetText.value = data.responseData.translatedText;
                    copyBtn.disabled = false;
                    showTooltip('Translation successful!', 'success');

                    // Show detected language if available
                    if (data.responseData.match) {
                        detectedLang.style.display = 'inline-flex';
                        detectedLangName.textContent = getLangName(sourceLang.value);
                    }
                } else {
                    throw new Error('Translation failed');
                }
            } catch (error) {
                showTooltip('Translation failed. Please try again.', 'error');
                targetText.value = '';
            } finally {
                translateBtn.classList.remove('loading');
            }
        }

        // Copy to clipboard
        copyBtn.addEventListener('click', async () => {
            try {
                await navigator.clipboard.writeText(targetText.value);
                showTooltip('Copied to clipboard!', 'success');
            } catch (error) {
                showTooltip('Failed to copy', 'error');
            }
        });

        // Get language name
        function getLangName(code) {
            const option = Array.from(sourceLang.options).find(opt => opt.value === code);
            return option ? option.textContent : code;
        }

        // Show tooltip
        function showTooltip(message, type = 'success') {
            tooltip.textContent = message;
            tooltip.style.background = type === 'success' ? '#10b981' : '#ef4444';
            tooltip.style.left = '50%';
            tooltip.style.bottom = '30px';
            tooltip.style.transform = 'translateX(-50%)';
            tooltip.classList.add('show');
            setTimeout(() => tooltip.classList.remove('show'), 3000);
        }

        // Translate button
        translateBtn.addEventListener('click', translate);

        // Enter key support (Ctrl+Enter)
        sourceText.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && e.ctrlKey) {
                translate();
            }
        });

        // Auto-translate on input (with debounce)
        let translateTimeout;
        sourceText.addEventListener('input', () => {
            clearTimeout(translateTimeout);
            translateTimeout = setTimeout(() => {
                if (sourceText.value.trim().length > 3) {
                    translate();
                }
            }, 1000);
        });

        // Focus on load
        window.addEventListener('load', () => {
            sourceText.focus();
        });
    </script>
</body>
</html>